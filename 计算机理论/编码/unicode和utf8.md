# Unicode 和 UTF-8 有什么区别？

 简单来说：

- Unicode 是「字符集」
- UTF-8 是「编码规则」

其中：

- 字符集：为每一个「字符」分配一个唯一的 ID（学名为码位 / 码点 / Code Point）
- 编码规则：将「码位」转换为字节序列的规则（编码/解码 可以理解为 加密/解密 的过程）

广义的 Unicode 是一个标准，定义了一个字符集以及一系列的编码规则，即 Unicode 字符集和 UTF-8、UTF-16、UTF-32 等等编码……

Unicode 字符集为每一个字符分配一个码位，例如「知」的码位是 30693，记作 U+77E5（30693 的十六进制为 0x77E5）。

## UTF-8

UTF-8旨在解决多字节编码在网络中传输和校验的问题，就是给unicode包了一层外衣是一套以 8 位为一个编码单位的可变长编码。会将一个码位编码为 1 到 4 个字节：

```text
U+ 0000 ~ U+  007F: 0XXXXXXX
U+ 0080 ~ U+  07FF: 110XXXXX 10XXXXXX
U+ 0800 ~ U+  FFFF: 1110XXXX 10XXXXXX 10XXXXXX
U+10000 ~ U+10FFFF: 11110XXX 10XXXXXX 10XXXXXX 10XXXXXX
```

不同长度的编码采用非前缀码，使得程序很容易判断字符是几个字节长度的。

* 0开头

一字节长度编码，最小值为00000000,最大值为01111111。

* 10开头

10开头表明这个不是一字节的，而是多字节中的剩余部分。

* 110开头

有两个1，两字节。

如此判断一直到第4位。因为4个字节已经可以存储2^32，大致40亿个，满足地球上所有文字使用量的需求，所以无需再增加字节数了。

根据上表中的编码规则，之前的「知」字的码位 U+77E5 属于第三行的范围：

```shell
        7        7        E         5    
    0111 0111 1110 0101    二进制的77E5
# 77E5 位于U+ 0800 ~ U+  FFFF，进3字节编码组
          0111      011111       100101 二进制的77E5代入模版
1110XXXX 10XXXXXX 10XXXXXX 模版
11100111 10011111  10100101 
   E        7        9        F        A       5
```

这就是将 U+77E5 按照 UTF-8 编码为字节序列 E79FA5 的过程，反之亦然。

